
{% extends "base.html" %}
{% block content %}

{% set active_tab = "list" %}
{% include "projects/project_topbar.html" with context %}



<div class="project-header">
    <h2>{{ project.title }}</h2>
    <button class="status-badge">ðŸŸ¢ On track</button>
</div>


<div class="task-table">

    <div class="table-header">
        <div class="col-name">Name</div>
        <div class="col-assignee">Assignee</div>
        <div class="col-date">Due date</div>
        <div class="col-priority">Priority</div>
        <div class="col-status">Status</div>
        <div class="col-add">+</div>
    </div>

    {% for section, tasks in sections.items() %}

        <div class="section-title">
            â–¼ {{ section }}
        </div>

        {% for t in tasks %}
        <div class="task-row">
            <div class="col-name">
                <input type="checkbox" {% if t.status == 'done' %}checked{% endif %}>
                {{ t.title }}
            </div>

            <div class="col-assignee">
                {% if t.assignee %}
                    <span class="avatar">{{ t.assignee.name[0] }}</span>
                    {{ t.assignee.name }}
                {% else %}
                    â€”
                {% endif %}
            </div>

            <div class="col-date">
                {% if t.due_date %}
                    {{ t.due_date.strftime("%b %d") }}
                {% else %}
                    â€”
                {% endif %}
            </div>

            <div class="col-priority">
                <span class="priority {{ t.priority|lower }}">
                    {{ t.priority }}
                </span>
            </div>

            <div class="col-status">
                <span class="status {{ t.status }}">
                    {{ t.status }}
                </span>
            </div>

            <div class="col-add">â‹¯</div>
        </div>
        {% endfor %}

        <div class="add-task-row">Add task...</div>

    {% endfor %}

    <div class="add-section-btn">
        + Add Section
    </div>

</div>

<style>

.project-header {
    display:flex;
    justify-content:space-between;
    align-items:center;
}

.status-badge {
    background:#e7f8ea;
    border:1px solid #a3e6b0;
    color:#1a8f3d;
    padding:6px 12px;
    border-radius:8px;
}

.tabs {
    display:flex;
    gap:20px;
    margin:20px 0;
}

.tabs a {
    color:#777;
    text-decoration:none;
}

.tabs .active-tab {
    border-bottom:2px solid black;
    padding-bottom:4px;
    font-weight:bold;
}

.table-header, .task-row {
    display:flex;
    align-items:center;
    padding:10px 0;
    border-bottom:1px solid #eee;
}

.col-name { flex:2; }
.col-assignee { flex:1; }
.col-date { flex:1; }
.col-priority { flex:1; }
.col-status { flex:1; }
.col-add { width:40px; text-align:center; }

.section-title {
    margin-top:20px;
    font-weight:bold;
    color:#555;
}

.add-task-row {
    padding:10px;
    color:#888;
    cursor:pointer;
}

.add-section-btn {
    margin-top:20px;
    padding:12px;
    background:#fafafa;
    border:1px solid #ddd;
    text-align:center;
    cursor:pointer;
    border-radius:6px;
}

.priority.low {
    background:#d4f7d7;
    color:#2f8f3a;
    padding:4px 10px;
    border-radius:6px;
}

.priority.medium {
    background:#fff4ce;
    color:#a67800;
    padding:4px 10px;
    border-radius:6px;
}

.priority.high {
    background:#ffe2e2;
    color:#c62828;
    padding:4px 10px;
    border-radius:6px;
}

.status.todo {
    background:#e5f1ff;
    color:#1769aa;
    padding:4px 10px;
    border-radius:6px;
}

.status['in-progress'] {
    background:#fff4ce;
    color:#b36b00;
    padding:4px 10px;
    border-radius:6px;
}

.status.done {
    background:#d4f7d7;
    color:#2e7d32;
    padding:4px 10px;
    border-radius:6px;
}

.avatar {
    background:#e0e0e0;
    border-radius:50%;
    padding:6px 9px;
    margin-right:6px;
}

</style>

{% endblock %}
